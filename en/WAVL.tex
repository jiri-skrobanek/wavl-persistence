

\section{Original Weak AVL tree}

\begin{defn}
A binary tree is said to be {\em ranked binary tree} if all vertices have non-negative integer ranks assigned. External vertices are by convention given rank $-1$. We denote $r(V)$ the rank of vertex $V$.
\end{defn}

\begin{defn}
Vertex $V$ having left child $L$ and right child $R$ (both of which may be external) in ranked binary tree is called $(a,b)$-vertex if $r(V) - r(L) = a$ and $r(V) - r(L) = b$. $L$ and $R$ are called $a$-child and $b$-child.
\end{defn}

\begin{thm}
Let $S$ be a finite subset of $\{ (a,b) | a,b \in \N \}$ and $T$ a ranked tree with $n$ vertices. If it holds that for every $(i,j)-$vertex in $T$ $(i,j) \in S$, then the height of $T$ is $\Theta(\log n)$.
\end{thm}

\begin{myproof}
TODO
\end{myproof}

\begin{defn}
A ranked tree is said to be {\em Weak AVL tree} if all its vertices are either $(1,1), (1,2), (2,1)$ or $(2,2)$ and all leaves are of rank 0.
\end{defn}

\begin{figure}
\begin{center}
\begin{tikzpicture}[sibling distance=32pt]
\Tree
[ \edge node[auto=right]{1 or 2}; [.Y
    \edge node[auto=right] {0};
    \node[draw,triangle]{~};
    \edge node[auto=left] {1};
    \node[draw,triangle]{~};
] ]
\end{tikzpicture}
\qquad
\begin{tikzpicture}[sibling distance=32pt]
\Tree
[ \edge node[auto=right]{0 or 1}; [.Y
    \edge node[auto=right] {1};
    \node[draw,triangle]{~};
    \edge node[auto=left] {2};
    \node[draw,triangle]{~};
] ]
\end{tikzpicture}
\end{center}
\caption{Promote step}
\end{figure}

\begin{figure}
\begin{center}
\begin{tikzpicture}[sibling distance=32pt]
\Tree
[ \edge node[auto=right]{1 or 2}; [.z
    \edge node[auto=right] {0};
    [   .x 
        \edge node[auto=right] {1}; 
        \node[draw,triangle]{A}; 
        \edge node[auto=left] {1};
        \node[draw,triangle]{B}; ]
    \edge node[auto=left] {2};
    \node[draw,triangle]{C};
] ]
\end{tikzpicture}
\qquad
\begin{tikzpicture}[sibling distance=32pt]
\Tree
[ \edge node[auto=right]{1 or 2}; [.x
    \edge node[auto=right] {1};
    \node[draw,triangle]{A};
    \edge node[auto=left] {1};
    [   .z 
        \edge node[auto=right] {1}; 
        \node[draw,triangle]{B}; 
        \edge node[auto=left] {1}; 
        \node[draw,triangle]{C}; ]
] ]
\end{tikzpicture}
\end{center}
\caption{Promote rotation step}
\end{figure}

\begin{figure}
\begin{center}
\begin{tikzpicture}[sibling distance=8pt]
\Tree
[ 
    \edge node[auto=right]{1 or 2}; 
    [
        .z
        \edge node[auto=right] {0};
        [   
            .x 
            \edge node[auto=right] {2}; 
            \node[draw,triangle]{A}; 
            \edge node[auto=left] {1};
            [
                .y
                \node[draw,triangle]{B};
                \node[draw,triangle]{C}; 
            ]
        ]
        \edge node[auto=left] {2};
        \node[draw,triangle]{D};
    ] 
]
\end{tikzpicture}
\qquad
\begin{tikzpicture}[sibling distance=8pt]
\Tree
[ \edge node[auto=right]{1 or 2}; [.y
    \edge node[auto=right] {1};
    [ 
        .x
        \edge node[auto=right] {1};
        \node[draw,triangle]{A};
        \node[draw,triangle]{B};
    ]
    \edge node[auto=left] {1};
    [   .z 
        \node[draw,triangle]{C}; 
        \edge node[auto=left] {1}; 
        \node[draw,triangle]{D}; ]
] ]
\end{tikzpicture}
\end{center}
\caption{Promote double rotation step}
\end{figure}


TODO: discuss operations

We get the following.

\begin{prop}
Insertion and deletion on a Weak AVL tree have time complexity $\Theta(\log n)$ and require at most one rotation.
\end{prop}
